/* =================================================================== */
/* --- 1. General Body & Reset Styles --- */
/* =================================================================== */
:root {
    --primary-color: #5b3bb0;
    --primary-color-dark: #4a2f91;
    --secondary-color: #6c757d;
    --background-color: #f4f7fc;
    --sidebar-bg: #1e293b;
    --sidebar-text: #cbd5e1;
    --sidebar-hover-bg: #334155;
    --sidebar-active-bg: #475569;
    --card-bg: #ffffff;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --border-color: #e2e8f0;
    --success-color: #28a745; /* Added for status tags */
    --warning-color: #ffc107; /* Added for status tags */
    --danger-color: #dc3545; /* Added for status tags */
    --info-color: #17a2b8; /* Added for status tags */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* Added */
}

*, *::before, *::after {
    box-sizing: border-box;
}

body {
    font-family: 'Cairo', sans-serif;
    direction: rtl;
    margin: 0;
    background-color: var(--background-color);
    color: var(--text-primary);
    line-height: 1.6;
    font-size: 16px;
    /* Ensure body itself doesn't have weird padding/margins if applied elsewhere */
    padding: 0;
}

/* Ensure main content is below sticky header/notification */
.admin-panel-container {
    display: flex;
    min-height: 100vh;
    /* Adjust padding-top dynamically via JS if using sticky/fixed header */
}


/* =================================================================== */
/* --- 2. Login Prompt --- */
/* =================================================================== */
/* Reverted to simpler prompt styling for the visual box */
.login-prompt-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.6); display: flex; flex-direction: column;
    justify-content: center; align-items: center; z-index: 1000;
    color: white; text-align: center; padding: 20px;
}
.login-prompt-container h2 { margin-top: 0; }
/* Added basic login box style for the visual prompt backdrop */
.login-box {
    background: var(--card-bg);
    padding: 40px;
    text-align: center;
    border-radius: 12px;
    box-shadow: var(--shadow-md);
    max-width: 400px;
    width: 90%;
    color: var(--text-primary); /* Ensure text is readable */
}
.login-box p {
    color: var(--text-secondary);
    margin-bottom: 25px;
}


/* =================================================================== */
/* --- 3. Main Admin Panel Layout --- */
/* =================================================================== */
/* Ensure sidebar is fixed and main content has margin */
#admin-sidebar {
    width: 260px;
    background-color: var(--sidebar-bg);
    color: var(--sidebar-text);
    position: fixed;
    right: 0; /* For RTL */
    top: 0;
    height: 100%;
    z-index: 100;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease-in-out;
}

#admin-main-content {
    flex-grow: 1;
    margin-right: 260px; /* Offset main content by sidebar width for RTL */
    padding: 0;
    transition: margin-right 0.3s ease-in-out;
    width: calc(100% - 260px); /* Ensure main content takes correct width */
}

/* Padding for content area */
.content-area { padding: 30px; }
/* General view switching classes */
.content-view { display: none; }
.content-view.active { display: block; animation: fadeIn 0.4s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }


/* =================================================================== */
/* --- 4. Sidebar Styles --- */
/* =================================================================== */
.sidebar-header {
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    background-color: rgba(0,0,0,0.2);
}
.sidebar-header h3 { margin: 0; color: #fff; font-size: 1.25rem; }
.sidebar-nav { flex-grow: 1; padding-top: 15px; }
.sidebar-nav ul { list-style: none; padding: 0; margin: 0; }
.sidebar-nav .nav-link {
    display: flex; align-items: center; gap: 12px; padding: 12px 20px;
    color: var(--sidebar-text); text-decoration: none; font-size: 0.95rem; font-weight: 600;
    border-right: 4px solid transparent; /* Active indicator for RTL */
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}
.sidebar-nav .nav-link:hover { background-color: var(--sidebar-hover-bg); color: #fff; }
.sidebar-nav .nav-link.active {
    background-color: var(--sidebar-active-bg); color: #fff;
    border-right-color: var(--primary-color); /* Active indicator for RTL */
}
.sidebar-nav .nav-link box-icon { fill: currentColor; flex-shrink: 0; }
.sidebar-footer { padding: 20px; border-top: 1px solid var(--sidebar-hover-bg); }
.full-width { width: 100%; }
.nav-link-faux {
    /* Styles for dashboard "View All" links etc. */
     text-decoration: none;
     color: var(--primary-color);
     font-weight: 600;
     font-size: 0.95rem;
     display: inline-flex;
     align-items: center;
     gap: 5px;
     transition: gap 0.2s ease;
}
.nav-link-faux:hover {
    gap: 8px;
    text-decoration: underline;
}


/* =================================================================== */
/* --- 5. Main Content Header --- */
/* =================================================================== */
.main-content-header {
    background-color: var(--card-bg); padding: 15px 30px; box-shadow: var(--shadow-sm);
    display: flex; align-items: center; position: sticky; top: 0; z-index: 50;
    width: 100%;
    margin: 0;
}
.main-content-header h1 { margin: 0; font-size: 1.5rem; color: var(--text-primary); }
.mobile-only-btn { display: none; background: none; border: none; cursor: pointer; margin-left: 15px; /* Spacing for RTL */ padding: 8px;}


/* =================================================================== */
/* --- 6. General Components & Forms --- */
/* =================================================================== */
.button { padding: 9px 18px; font-size: 0.9rem; font-weight: 600; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; border: none; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: #fff; gap: 7px; font-family: 'Cairo', sans-serif; box-shadow: var(--shadow-sm); }
.button:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }
.button:active { transform: translateY(0); box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); }
.button.primary { background-color: var(--primary-color); }
.button.primary:hover { background-color: var(--primary-color-dark); }
.button.secondary { background-color: var(--secondary-color); }
.button.secondary:hover { background-color: #5a6268; }
.button.danger { background-color: var(--danger-color); }
.button.danger:hover { background-color: #c82333; }

.admin-section { margin-bottom: 30px; padding: 25px; background-color: var(--card-bg); border-radius: 12px; box-shadow: var(--shadow-md); }
.admin-section h2 { color: var(--text-primary); border-bottom: 2px solid var(--border-color); padding-bottom: 12px; margin-top: 0; margin-bottom: 25px; font-size: 1.3rem; display: flex; align-items: center; gap: 10px; }
.admin-section h2 box-icon { fill: currentColor; } /* Style icon in section header */

.form-group { margin-bottom: 18px; }
.form-group label, .setting-item label { display: block; margin-bottom: 7px; font-weight: 600; font-size: 0.88rem; color: var(--text-secondary); }
input[type="text"], input[type="number"], select, textarea { width: 100%; padding: 10px 14px; border: 1px solid var(--border-color); border-radius: 6px; box-sizing: border-box; font-family: 'Cairo', sans-serif; font-size: 0.95rem; transition: all 0.15s ease-in-out; background-color: #f8fafc; }
input:focus, select:focus, textarea:focus { border-color: var(--primary-color); outline: 0; box-shadow: 0 0 0 0.2rem rgba(91, 59, 176, .25); background-color: #fff; }
input[readonly] { background-color: #e9ecef; cursor: not-allowed; }


/* =================================================================== */
/* --- 7. Dashboard & Specific Sections (Stats, Recent Tx) --- */
/* =================================================================== */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; }
.stat-card { background-color: var(--card-bg); padding: 20px; border-radius: 12px; box-shadow: var(--shadow-md); display: flex; align-items: center; gap: 15px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
.stat-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); } /* Added hover effect */
.stat-card-icon { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
/* Specific colors for icons */
.stat-card-icon.orange { background-color: #fb923c; } /* Pending */
.stat-card-icon.green { background-color: #4ade80; } /* Completed */
.stat-card-icon.blue { background-color: #60a5fa; } /* Active Methods / Monthly Completed */
.stat-card-icon box-icon { fill: #fff; }

.stat-title { font-size: 0.9rem; color: var(--text-secondary); font-weight: 500; }
.stat-value { font-size: 1.75rem; font-weight: 700; color: var(--text-primary); }

/* Recent transactions table in dashboard */
#recent-transactions-table {
    /* Inherits general table styles */
}
#recent-transactions-table th, #recent-transactions-table td {
     padding: 10px 15px; /* Slightly less padding than main table */
}


/* =================================================================== */
/* --- 8. Table & Modal Styles --- */
/* =================================================================== */
/* CRITICAL FIX: Ensures the container itself handles the overflow */
.table-responsive {
    display: block;
    width: 100%;
    overflow-x: auto; /* Handles horizontal scrolling */
    -webkit-overflow-scrolling: touch;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 15px; /* Space below tables */
}
table { width: 100%; border-collapse: collapse; font-size: 0.9rem; min-width: 600px; /* Ensure horizontal scroll appears if needed */ }
th, td { padding: 12px 15px; text-align: right; vertical-align: middle; border-bottom: 1px solid var(--border-color); white-space: nowrap; }
thead th { background-color: #f8fafc; font-weight: 600; color: var(--text-secondary); position: sticky; top: 0; z-index: 10; }
tbody tr:hover { background-color: #f8fafc; }
tbody tr:last-child td { border-bottom: none; }

.status-tag { padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: white; text-align: center; display: inline-block; min-width: 90px; }
.status-tag.status-pending { background-color: var(--warning-color); color: var(--text-primary); }
.status-tag.status-processing { background-color: var(--info-color); }
.status-tag.status-completed { background-color: var(--success-color); }
.status-tag.status-rejected { background-color: var(--danger-color); }

/* Removed Status History List styles as it's not in the main transactions table anymore */
/*
.status-history-list { ... }
.status-history-item { ... }
.status-history-item:last-child { ... }
.status-history-item .status-tag { ... }
.status-history-item .timestamp { ... }
*/


/* Modal Styles */
.modal { position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow-y: auto; background-color: rgba(0,0,0,0.65); display: none; align-items: flex-start; justify-content: center; padding: 5vh 0; }
.modal.show { display: flex; }
.modal-content { background-color: var(--card-bg); margin: auto; padding: 25px 35px; width: 90%; max-width: 750px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.25); position: relative; }
.close-modal-btn { background: none; border: none; font-size: 1.5rem; color: var(--text-secondary); position: absolute; left: 15px; top: 10px; cursor: pointer; }
.modal-content h3 { margin-top: 0; margin-bottom: 20px; color: var(--text-primary); }
.sub-form-section-visible, .sub-form-section { border:1px solid var(--border-color); padding:15px; margin-top:20px; border-radius:8px; }
#site-account-fields { display: none; }
.fee-group { padding-bottom:15px; margin-bottom:15px; border-bottom:1px dashed #ccc; }
.fee-group:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.sub-section-title, .fee-group h5 { font-size:1rem; color: var(--primary-color); margin:0 0 15px 0; font-weight:600; }


/* =================================================================== */
/* --- 9. Controls & Search Input --- */
/* =================================================================== */
.controls { display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-end; margin-bottom: 20px; }
.control-group { display: flex; flex-direction: column; gap: 5px; }
.control-group label { margin-bottom: 0; font-weight: 600; font-size: 0.9em; color: var(--text-secondary); }

/* Specific styles for search input group in transactions view */
.control-group.search-control-group { flex-grow: 1; min-width: 250px; }
.input-with-button { display: flex; align-items: center; }
/* Ensure input and button fit together visually for RTL */
.input-with-button input {
    flex-grow: 1;
    border-top-left-radius: 6px; /* Keep standard border-radius */
    border-bottom-left-radius: 6px;
    border-top-right-radius: 0; /* Remove border-radius on right side */
    border-bottom-right-radius: 0;
    border-left: 1px solid var(--border-color); /* Keep left border */
    border-right: none; /* Remove right border */
}
.input-with-button .button {
    border-top-right-radius: 6px; /* Keep standard border-radius */
    border-bottom-right-radius: 6px;
    border-top-left-radius: 0; /* Remove border-radius on left side */
    border-bottom-left-radius: 0;
    box-shadow: none; /* Remove shadow when attached */
    padding: 10px 14px; /* Match input height */
    height: 100%; /* Ensure button matches input height */
    display: flex; /* Ensure flex properties are applied */
    align-items: center;
    justify-content: center;
}
.input-with-button .button:hover { transform: none; box-shadow: none; }


/* =================================================================== */
/* --- 10. Payment Methods Management --- */
/* =================================================================== */
.payment-method-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
.payment-method-card { background-color: #fff; border: 1px solid var(--border-color); border-radius: 8px; padding: 20px; box-shadow: var(--shadow-sm); transition: all 0.2s ease-in-out; display: flex; flex-direction: column; }
.payment-method-card:hover { box-shadow: var(--shadow-md); transform: translateY(-3px); } /* Added hover effect */
.payment-method-card h4 { margin-top: 0; margin-bottom: 12px; color: var(--primary-color); font-size: 1.15rem; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px; display:flex; align-items:center; gap: 8px; }
.payment-method-card h4 box-icon { fill: currentColor; }
.payment-method-card p { margin: 5px 0; font-size: 0.9rem; color: var(--text-secondary); }
.payment-method-card strong { color: var(--text-primary); }
.payment-method-card .actions { margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; display: flex; gap: 10px; justify-content: flex-start; /* RTL */ }
.payment-method-card .button { padding: 8px 12px; font-size: 0.85rem; } /* Smaller buttons in card */

/* Modal Form Layouts */
.form-grid-2col { display: grid; grid-template-columns: 1fr 1fr; gap: 0 20px; }
.form-group-inline { display: flex; align-items: center; gap: 8px; margin-bottom: 15px; }
.form-actions { margin-top: 25px; display: flex; justify-content: flex-start; /* RTL */ gap: 12px; flex-wrap: wrap;} /* Added flex-wrap */


/* =================================================================== */
/* --- 11. Platform Fees Report Section --- */
/* =================================================================== */
#fees-report-controls {
    /* Inherits .controls styles */
    margin-bottom: 20px;
}

#fees-report-stats {
    /* Inherits .stats-grid styles */
    margin-bottom: 20px;
}

#fees-report-stats .stat-card {
    /* Inherits .stat-card styles */
}
/* Specific colors for fees stats */
#fees-report-stats .stat-card .stat-card-icon.blue { background-color: #60a5fa; } /* Use blue for monthly count */
#fees-report-stats .stat-card .stat-card-icon.green { background-color: var(--success-color); } /* Use green for total fees */


#fees-report-table-container table {
    /* Inherits general table styles */
    /* Add specific column widths if layout needs fine-tuning */
    /* Example: */

    #fees-report-table-container th:nth-child(1), /* ID */
    #fees-report-table-container td:nth-child(1) { width: 100px; }
    #fees-report-table-container th:nth-child(5), /* Completion Date */
    #fees-report-table-container td:nth-child(5) { width: 120px; }
    #fees-report-table-container th:nth-child(6), /* Fee */
    #fees-report-table-container td:nth-child(6) { width: 120px; }
    /* Other columns (Client, Sent, Received) will flex based on content */

}

#fees-report-loading,
#fees-report-no-data {
    text-align: center;
    padding: 20px;
    color: var(--text-secondary);
}

/* Initial state handled by JS, but good to have defaults */
/* #fees-report-loading { display: block; } */
/* #fees-report-no-data { display: none; } */


/* =================================================================== */
/* --- 12. Overlay for mobile menu --- */
/* =================================================================== */
#overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.5); z-index: 99;
    display: none; opacity: 0; transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out; /* Added visibility */
    visibility: hidden;
}
#overlay.active { display: block; opacity: 1; visibility: visible; }


/* =================================================================== */
/* --- 13. Responsive Adjustments --- */
/* =================================================================== */
@media (max-width: 991px) {
    /* Sidebar mobile styles */
    #admin-sidebar { transform: translateX(100%); } /* RTL: move off-screen to the right */
    #admin-sidebar.mobile-active { transform: translateX(0); box-shadow: var(--shadow-md); }
    #admin-main-content { margin-right: 0; width: 100%; } /* Main content takes full width */

    /* Header mobile styles */
    .mobile-only-btn { display: flex; align-items: center; }
    .main-content-header { padding-left: 15px; padding-right: 15px; }

    /* Content area padding */
    .content-area { padding: 15px; }

    /* Modal size adjustments */
    .modal-content { padding: 20px 25px; } /* Less padding on mobile */

     /* Ensure payment method grid wraps earlier if needed */
     .payment-method-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }

}
@media (max-width: 768px) {
    /* General section padding */
    .admin-section { padding: 20px; }
    /* Form grid collapse */
    .form-grid-2col { grid-template-columns: 1fr; gap: 0; } /* Stack form columns */
    /* Payment method grid column */
    .payment-method-grid { grid-template-columns: 1fr; } /* Stack payment method cards */
    /* Stats grid gap */
    .stats-grid { gap: 15px; } /* Reduce gap */
    /* Modal padding */
    .modal-content { padding: 15px 20px; }

    /* Table responsive adjustments (Optional for admin, depends on required scroll vs stacking) */
    /* Uncomment and adjust if you prefer stacking tables on mobile */
    /*
    .table-responsive table, .table-responsive tbody, .table-responsive tr, .table-responsive td {
        display: block; width: 100%; box-sizing: border-box;
    }
    .table-responsive thead { display: none; } // Hide headers on mobile
    .table-responsive tr { margin-bottom: 15px; border: 1px solid var(--border-color); border-radius: 8px; }
    .table-responsive td {
        display: flex; justify-content: space-between; align-items: center;
        padding: 10px 15px; text-align: right; border-bottom: 1px dashed var(--border-color);
    }
     .table-responsive td::before { content: attr(data-label); font-weight: 600; text-align: right; margin-left: 10px; color: var(--text-secondary); flex-shrink: 0; }
    */

}
@media (max-width: 576px) {
    /* Controls layout stack */
    .controls { flex-direction: column; align-items: stretch; }
    .control-group { width: 100%; }
    /* Search input with button adjustments for small screens */
    .input-with-button { flex-direction: column; align-items: stretch; } /* Stack input and button */
    .input-with-button input {
        border-radius: 6px; /* Restore full border-radius */
        border-right: 1px solid var(--border-color); /* Restore right border */
        margin-bottom: 10px; /* Add space below input */
    }
    .input-with-button .button {
        width: 100%; /* Button takes full width */
        border-radius: 6px; /* Restore full border-radius */
    }
    /* Hide refresh button on very small screens if layout is too cramped */
     #refresh-transactions { display: none; }


     /* Adjust form action buttons layout */
     .form-actions {
        flex-direction: column;
        gap: 10px;
     }
     .form-actions .button {
        width: 100%;
        justify-content: center;
     }

     /* Adjust modal button layout */
     .modal-footer {
         flex-direction: column;
         gap: 10px;
     }
     .modal-button {
         width: 100%;
         justify-content: center;
     }
}

/* =================================================================== */
/* --- END OF CSS --- */
/* =================================================================== */